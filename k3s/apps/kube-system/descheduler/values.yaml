---
descheduler:
  # helm install descheduler --namespace kube-system descheduler/descheduler -f values.yaml
  # Default values for descheduler.
  # This is a YAML-formatted file.
  # Declare variables to be passed into your templates.

  # CronJob or Deployment
  kind: CronJob

  image:
    repository: k8s.gcr.io/descheduler/descheduler
    # Overrides the image tag whose default is the chart version
    tag: "v0.23.1"
    pullPolicy: IfNotPresent

  imagePullSecrets: []

  resources:
    requests:
      cpu: 300m
      memory: 256Mi
    limits:
      cpu: 300m
      memory: 256Mi

  nameOverride: ""
  fullnameOverride: ""

  commonLabels: {}

  cronJobApiVersion: "batch/v1"
  schedule: "*/30 * * * *"
  suspend: false
  # startingDeadlineSeconds: 200
  successfulJobsHistoryLimit: 1
  failedJobsHistoryLimit: 1

  # Required when running as a Deployment
  deschedulingInterval: 5m

  cmdOptions:
    v: 4
    max-pods-to-evict-per-node: 10

  podAnnotations:
    botkube.io/disable: "true"

  deschedulerPolicy:
  strategies:
    RemoveDuplicates:
      enabled: true
      params:
          removeDuplicates:
            excludeOwnerKinds:
            - "ReplicaSet"
    RemovePodsViolatingNodeTaints:
      enabled: true
    RemovePodsViolatingNodeAffinity:
      enabled: true
      params:
        nodeAffinityType:
        - requiredDuringSchedulingIgnoredDuringExecution
    RemovePodsViolatingInterPodAntiAffinity:
      enabled: true
    LowNodeUtilization:
      enabled: true
      params:
        nodeResourceUtilizationThresholds:
          thresholds:
            cpu: 20
            memory: 20
            pods: 20
          targetThresholds:
            cpu: 50
            memory: 60
            pods: 50
    RemovePodsHavingTooManyRestarts:
        enabled: true
        params:
          podsHavingTooManyRestarts:
            podRestartThreshold: 10
            includingInitContainers: true

  priorityClassName: system-cluster-critical

  nodeSelector:
    beta.kubernetes.io/arch: amd64

  rbac:
    # Specifies whether RBAC resources should be created
    create: true

  podSecurityPolicy:
    # Specifies whether PodSecurityPolicy should be created.
    create: true

  serviceAccount:
    # Specifies whether a ServiceAccount should be created
    create: true
    # The name of the ServiceAccount to use.
    # If not set and create is true, a name is generated using the fullname template
    name:
